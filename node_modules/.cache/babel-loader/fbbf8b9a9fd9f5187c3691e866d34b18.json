{"ast":null,"code":"import _classCallCheck from \"/home/dev-marvin/Desktop/new-shit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/dev-marvin/Desktop/new-shit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/dev-marvin/Desktop/new-shit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/dev-marvin/Desktop/new-shit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/dev-marvin/Desktop/new-shit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/dev-marvin/Desktop/new-shit/src/Components/Tray/TrayGrid.js\";\nimport React, { Component, Fragment } from 'react';\nimport { Grid, Loader, Header, Menu, Accordion, Icon, Form, Dropdown } from 'semantic-ui-react';\nimport { Query } from 'react-apollo';\nimport { MY_CART, ALL_ADDRESS } from '../../QUERIES/ALL_QUERIES';\nimport HeaderTrayItem from './HeaderTrayItem';\n\nvar subTotal = function subTotal(arr) {\n  return arr.reduce(function (sum, i) {\n    var n = sum + i.product.price * i.quantity;\n    return n.toLocaleString();\n  }, 0);\n};\n\nvar grandTotal = function grandTotal(arr, hit) {\n  return arr.reduce(function (sum, i) {\n    var n = sum + i.product.price * i.quantity;\n    var m = n + parseInt(hit);\n    return m.toLocaleString();\n  }, 0);\n};\n\nvar TrayGrid =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TrayGrid, _Component);\n\n  function TrayGrid() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TrayGrid);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TrayGrid)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isOpenAccDel: false,\n      baranggay: '',\n      municipal: '',\n      deliveryFee: 0\n    };\n\n    _this.handleClickAccDel = function () {\n      _this.setState({\n        isOpenAccDel: !_this.state.isOpenAccDel\n      });\n    };\n\n    _this.handleChangeMunicipal = function (e, _ref) {\n      var value = _ref.value,\n          options = _ref.options;\n\n      _this.setState({\n        municipal: value\n      });\n    };\n\n    _this.handleChangeBaranggay = function (e, _ref2) {\n      var value = _ref2.value,\n          options = _ref2.options;\n      console.log(options);\n      var filterFee = options.find(function (x) {\n        return x.value === value;\n      });\n\n      _this.setState({\n        baranggay: value,\n        deliveryFee: filterFee.fee\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(TrayGrid, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          isOpenAccDel = _this$state.isOpenAccDel,\n          municipal = _this$state.municipal,\n          deliveryFee = _this$state.deliveryFee;\n      var isNotSet = deliveryFee === 0;\n      return React.createElement(Query, {\n        query: MY_CART,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, function (_ref3) {\n        var loading = _ref3.loading,\n            data = _ref3.data,\n            error = _ref3.error;\n        if (loading) return React.createElement(Loader, {\n          active: true,\n          inline: \"centered\",\n          size: \"large\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        });\n        var isEmpty = data.cart.length === 0;\n        console.log(data.cart);\n        if (isEmpty) return React.createElement(Grid.Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, React.createElement(Grid.Column, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, React.createElement(Header, {\n          as: \"h4\",\n          textAlign: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, React.createElement(Header.Content, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, \"The tray is empty. Please add your product.\"))));\n        return React.createElement(Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, React.createElement(Grid.Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, React.createElement(Grid.Column, {\n          width: 12,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, React.createElement(Menu, {\n          borderless: true,\n          widths: 5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, React.createElement(Menu.Item, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }), React.createElement(Menu.Item, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, \"Name\"), React.createElement(Menu.Item, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, \"Quantity\"), React.createElement(Menu.Item, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, \"Price\"), React.createElement(Menu.Item, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, \"Action\"))), data.cart.map(function (x) {\n          return React.createElement(HeaderTrayItem, {\n            key: x.id,\n            cart: x,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84\n            },\n            __self: this\n          });\n        })), !isEmpty ? React.createElement(Grid.Column, {\n          width: 4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, React.createElement(Query, {\n          query: ALL_ADDRESS,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, function (_ref4) {\n          var loading = _ref4.loading,\n              data = _ref4.data,\n              error = _ref4.error;\n          if (loading) return '';\n          var addressMunicipal = data.addresses.map(function (x) {\n            return {\n              key: x.id,\n              value: x.municipal,\n              text: x.municipal\n            };\n          });\n          var addressBaranggay = data.addresses.filter(function (x) {\n            return x.municipal === municipal;\n          }).map(function (y) {\n            return {\n              key: y.id,\n              value: y.baranggay,\n              text: y.baranggay,\n              fee: y.fee\n            };\n          });\n          return React.createElement(Menu, {\n            vertical: true,\n            fluid: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 107\n            },\n            __self: this\n          }, React.createElement(Accordion, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108\n            },\n            __self: this\n          }, React.createElement(Accordion.Title, {\n            active: isOpenAccDel,\n            onClick: _this2.handleClickAccDel,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 109\n            },\n            __self: this\n          }, React.createElement(Icon, {\n            name: \"dropdown\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 110\n            },\n            __self: this\n          }), \"CALCULATE DELIVERY\"), React.createElement(Accordion.Content, {\n            active: isOpenAccDel,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 113\n            },\n            __self: this\n          }, React.createElement(Menu.Menu, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114\n            },\n            __self: this\n          }, React.createElement(Header, {\n            size: \"small\",\n            textAlign: \"center\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 115\n            },\n            __self: this\n          }, \"Address\"), React.createElement(Menu.Item, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 116\n            },\n            __self: this\n          }, React.createElement(Dropdown, {\n            placeholder: \"Municipal\",\n            fluid: true,\n            search: true,\n            selection: true,\n            options: addressMunicipal,\n            onChange: _this2.handleChangeMunicipal,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 117\n            },\n            __self: this\n          })), React.createElement(Menu.Item, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 122\n            },\n            __self: this\n          }, React.createElement(Dropdown, {\n            placeholder: \"Baranggay\",\n            fluid: true,\n            search: true,\n            selection: true,\n            options: addressBaranggay,\n            onChange: _this2.handleChangeBaranggay,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 123\n            },\n            __self: this\n          }))))));\n        })), React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, React.createElement(Menu, {\n          vertical: true,\n          fluid: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, React.createElement(Menu.Item, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, \"TOTAL\", React.createElement(Menu.Menu, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, React.createElement(Menu.Item, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, \"Sub-Total: \", React.createElement(Header, {\n          color: \"orange\",\n          size: \"small\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, \"P \", subTotal(data.cart))), React.createElement(Menu.Item, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, \"Delivey Fee: \", React.createElement(Header, {\n          color: \"orange\",\n          size: \"small\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, isNotSet ? '' : 'P' + deliveryFee.toLocaleString())))), React.createElement(Menu.Item, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, \"Total: \", React.createElement(Header, {\n          color: \"orange\",\n          size: \"small\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, \"P \", grandTotal(data.cart, deliveryFee)))))) : ''));\n      });\n    }\n  }]);\n\n  return TrayGrid;\n}(Component);\n\nexport default TrayGrid;","map":{"version":3,"sources":["/home/dev-marvin/Desktop/new-shit/src/Components/Tray/TrayGrid.js"],"names":["React","Component","Fragment","Grid","Loader","Header","Menu","Accordion","Icon","Form","Dropdown","Query","MY_CART","ALL_ADDRESS","HeaderTrayItem","subTotal","arr","reduce","sum","i","n","product","price","quantity","toLocaleString","grandTotal","hit","m","parseInt","TrayGrid","state","isOpenAccDel","baranggay","municipal","deliveryFee","handleClickAccDel","setState","handleChangeMunicipal","e","value","options","handleChangeBaranggay","console","log","filterFee","find","x","fee","isNotSet","loading","data","error","isEmpty","cart","length","map","id","addressMunicipal","addresses","key","text","addressBaranggay","filter","y"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\nimport { Grid, Loader, Header, Menu, Accordion, Icon, Form, Dropdown } from 'semantic-ui-react'\nimport { Query } from 'react-apollo'\nimport { MY_CART, ALL_ADDRESS } from '../../QUERIES/ALL_QUERIES'\nimport HeaderTrayItem from './HeaderTrayItem'\n\nconst subTotal = (arr) => {\n  return arr.reduce((sum, i) => {\n    let n = sum + (i.product.price * i.quantity)\n    return n.toLocaleString()\n  }, 0)\n}\n\nconst grandTotal = (arr, hit) => {\n  return arr.reduce((sum, i) => {\n    let n = sum + (i.product.price * i.quantity)\n    let m = n + parseInt(hit)\n    return m.toLocaleString()\n  }, 0)\n}\n\n\nclass TrayGrid extends Component {\n\tstate= {\n\t\tisOpenAccDel: false,\n\t\tbaranggay: '',\n\t\tmunicipal: '',\n\t\tdeliveryFee: 0\n\t}\n\n\thandleClickAccDel = () => {\n\t\tthis.setState({ isOpenAccDel: !this.state.isOpenAccDel })\n\t}\n\thandleChangeMunicipal = (e, {value, options }) => {\n\t\tthis.setState({ municipal: value })\n\t}\n\thandleChangeBaranggay = (e, { value, options }) => {\n\t\tconsole.log(options)\n\t\tconst filterFee = options.find(x => x.value === value)\n\t\tthis.setState({ baranggay: value, deliveryFee: filterFee.fee  })\n\t}\n\n\trender() {\n\t\tconst { isOpenAccDel, municipal, deliveryFee } = this.state\n\t\tconst isNotSet = deliveryFee === 0\n\t\treturn (\n\t\t\t<Query query={MY_CART}>\n\t\t\t{({ loading, data, error }) => {\n\t\t\t\tif (loading) return <Loader active inline='centered' size='large' />\n\t\t\t\tconst isEmpty = data.cart.length === 0\n\t\t\t\tconsole.log(data.cart)\n\t\t\t\tif (isEmpty) return (\n\t\t\t\t\t<Grid.Row>\n\t\t\t\t\t<Grid.Column>\n\t\t\t\t\t\t<Header as='h4' textAlign='center'>\n\t\t\t              <Header.Content>The tray is empty. Please add your product.</Header.Content>\n\t\t\t            </Header>\n\t\t\t        </Grid.Column>\n\t\t            </Grid.Row>\n\t\t\t\t)\n\t\t\t\treturn (\n\t\t\t\t\t<Fragment>\t\t    \n\t\t\t\t\t<Grid.Row>\n\t\t\t\t\t\t<Grid.Column width={12}>\n\t\t\t\t\t\t\t<Form>\n\t\t\t\t\t\t\t<Menu borderless widths={5}>\n\t\t\t\t\t\t\t<Menu.Item>\n\t\t\t\t\t        </Menu.Item>\n\t\t\t\t\t        <Menu.Item>\n\t\t\t\t\t          Name\n\t\t\t\t\t        </Menu.Item>\n\t\t\t\t\t        <Menu.Item>\n\t\t\t\t\t          Quantity\n\t\t\t\t\t        </Menu.Item>\n\t\t\t\t\t        <Menu.Item>\n\t\t\t\t\t          Price\n\t\t\t\t\t        </Menu.Item>\n\t\t\t\t\t        <Menu.Item>\n\t\t\t\t\t          Action\n\t\t\t\t\t        </Menu.Item>\n\t\t\t\t      \t</Menu>\n\t\t\t\t      \t</Form>\n\t\t\t\t\t\t\t{data.cart.map(x =>\n\t\t\t\t\t      \t <HeaderTrayItem key={x.id} cart={x} />\n\t\t\t\t\t      \t)}\n\t\t\t\t\t    </Grid.Column>\n\t\t\t\t\t    {\n\t\t\t\t\t    \t!isEmpty \n\t\t\t\t\t    \t?\n\t\t\t\t\t\t    <Grid.Column width={4}>\n\t\t\t\t\t\t     <Form>\n\t\t\t\t\t\t     <Query query={ALL_ADDRESS}>\n\t\t\t\t\t\t     {({ loading, data, error }) => {\n\t\t\t\t\t\t     \tif (loading) return ''\n\t\t\t\t\t\t     \tconst addressMunicipal = data.addresses.map(x=> ({\n\t\t\t\t\t\t     \t\t\tkey: x.id,\n\t\t\t\t\t\t     \t\t\tvalue: x.municipal,\n\t\t\t\t\t\t     \t\t\ttext: x.municipal }))\n\t\t\t\t\t\t     \tconst addressBaranggay = data.addresses\n\t\t\t\t\t\t     \t\t.filter(x => x.municipal === municipal)\n\t\t\t\t\t\t     \t\t.map(y => ({\n\t\t\t\t\t\t     \t\t\tkey: y.id,\n\t\t\t\t\t\t     \t\t\tvalue: y.baranggay,\n\t\t\t\t\t\t     \t\t\ttext: y.baranggay,\n\t\t\t\t\t\t     \t\t\tfee: y.fee }))\n\t\t\t\t\t\t     \treturn (\n\t\t\t\t\t\t    \t<Menu vertical fluid>\n\t\t\t\t    \t\t\t\t<Accordion>\n\t\t\t\t    \t\t\t\t\t<Accordion.Title active={isOpenAccDel} onClick={this.handleClickAccDel}>\n\t\t\t\t    \t\t\t\t\t<Icon name='dropdown' />\n\t\t\t\t    \t\t\t\t\t\tCALCULATE DELIVERY\n\t\t\t\t    \t\t\t\t\t</Accordion.Title>\n\t\t\t\t    \t\t\t\t\t<Accordion.Content active={isOpenAccDel}>\n\t\t\t\t    \t\t\t\t\t\t<Menu.Menu>\n\t\t\t\t    \t\t\t\t\t\t\t<Header size='small' textAlign='center'>Address</Header>\n\t\t\t\t    \t\t\t\t\t\t\t<Menu.Item>\n\t\t\t\t\t    \t\t\t\t\t\t <Dropdown placeholder='Municipal' \n\t\t\t\t\t    \t\t\t\t\t\t \tfluid search selection\n\t\t\t\t\t    \t\t\t\t\t\t \toptions={addressMunicipal}\n\t\t\t\t\t    \t\t\t\t\t\t \tonChange={this.handleChangeMunicipal}/>\n\t\t\t\t\t    \t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t    \t\t\t\t\t\t<Menu.Item>\n\t\t\t\t\t    \t\t\t\t\t\t <Dropdown placeholder='Baranggay' \n\t\t\t\t\t    \t\t\t\t\t\t \tfluid search selection\n\t\t\t\t\t    \t\t\t\t\t\t \toptions={addressBaranggay}\n\t\t\t\t\t    \t\t\t\t\t\t \tonChange={this.handleChangeBaranggay}/>\n\t\t\t\t\t    \t\t\t\t\t\t</Menu.Item>\n\t\t\t\t    \t\t\t\t\t\t</Menu.Menu>\n\t\t\t\t    \t\t\t\t\t</Accordion.Content>\n\t\t\t\t    \t\t\t\t</Accordion>\n\t\t\t\t\t\t    \t</Menu>\n\t\t\t\t\t\t    \t)\n\t\t\t\t\t\t    }}\n\t\t\t\t\t\t    </Query>\n\t\t\t\t\t\t    </Form>\n\t\t\t\t\t\t    <Form>\n\t\t\t\t\t\t    <Menu vertical fluid>\n\t\t\t\t\t\t        <Menu.Item>\n\t\t\t\t\t\t          TOTAL\n\t\t\t\t\t\t          <Menu.Menu>\n\t\t\t\t\t\t            <Menu.Item>\n\t\t\t\t\t\t              Sub-Total: <Header color='orange' size='small'>P {subTotal(data.cart)}</Header>\n\t\t\t\t\t\t            </Menu.Item>\n\t\t\t\t\t\t            <Menu.Item>\n\t\t\t\t\t\t              Delivey Fee: <Header color='orange' size='small'>\n\t\t\t\t\t\t              {\n\t\t\t\t\t\t              \tisNotSet\n\t\t\t\t\t\t              \t?\n\t\t\t\t\t\t              \t\t''\n\t\t\t\t\t\t              \t:\n\t\t\t\t\t\t              \t\t'P' + deliveryFee.toLocaleString()\n\t\t\t\t\t\t              }</Header>\n\t\t\t\t\t\t            </Menu.Item>\n\t\t\t\t\t\t          </Menu.Menu>\n\t\t\t\t\t\t        </Menu.Item>\n\t\t\t\t\t\t        <Menu.Item>\n\t\t\t\t\t\t          Total: <Header color='orange' size='small'>P {grandTotal(data.cart, deliveryFee)}</Header>\n\t\t\t\t\t\t        </Menu.Item>\n\t\t\t\t\t\t    </Menu>\n\t\t\t\t\t\t    </Form>\n\t\t\t\t\t\t     </Grid.Column>\n\t\t\t\t\t\t    :\n\t\t\t\t\t\t    ''\n\t\t\t\t\t    }\n\t\t\t\t    </Grid.Row>\n\t\t\t\t    </Fragment>\n\t\t      \t)\n\t\t\t}}\n\t\t\t</Query>\n\t\t)\n\t}\n}\n\nexport default TrayGrid\n"]},"metadata":{},"sourceType":"module"}